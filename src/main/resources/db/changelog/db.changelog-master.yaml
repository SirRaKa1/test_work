databaseChangeLog:
  -  changeSet:
       id:  1
       author:  rakalus
       changes:
         - sql:
             dbms: 'postgresql'
             sql: create type sex as enum('male','female')

         - sql:
             dbms: 'postgresql'
             sql: create type comfort as enum('standard','high_comfort','luxury')

         - sql:
             dbms: 'postgresql'
             sql: CREATE CAST (varchar AS sex) WITH INOUT AS IMPLICIT

         - sql:
             dbms: 'postgresql'
             sql: CREATE CAST (varchar AS comfort) WITH INOUT AS IMPLICIT


         - createTable:
             tableName: rooms
             columns:
               - column:
                   name: id
                   type: serial
                   constraints:
                     primaryKey: true
                     nullable: false

               - column:
                   name: floor
                   type: int
                   constraints:
                     nullable: false

               - column:
                   name: number
                   type: int
                   constraints:
                     nullable: false

               - column:
                  name: type
                  type: sex
                  constraints:
                    nullable: false

               - column:
                   name: comfort
                   type: comfort
                   constraints:
                     nullable: false

               - column:
                   name: beds
                   type: int
                   constraints:
                     nullable: false

               - column:
                   name: created
                   type: date
                   constraints:
                     nullable: false

               - column:
                   name: edited
                   type: date
                   constraints:
                     nullable: false

         - createTable:
             tableName: guests
             columns:
               - column:
                   name: id
                   type: serial
                   constraints:
                     primaryKey: true
                     nullable: false

               - column:
                   name: room
                   type: int
                   constraints:
                     nullable: false
                     foreignKeyName: guests_room_rooms_id
                     references: rooms(id)

               - column:
                   name: surname
                   type: text
                   constraints:
                     nullable: false

               - column:
                   name: name
                   type: text
                   constraints:
                     nullable: false

               - column:
                   name: patronymic
                   type: text

               - column:
                  name: sex
                  type: sex
                  constraints:
                    nullable: false

               - column:
                   name: created
                   type: date
                   constraints:
                     nullable: false

               - column:
                   name: edited
                   type: date
                   constraints:
                     nullable: false




  - changeSet:
      id: 2
      author: rakalus
      changes:

        - renameSequence:
            oldSequenceName: guests_id_seq
            newSequenceName: guests_seq

        - renameSequence:
            oldSequenceName: rooms_id_seq
            newSequenceName: rooms_seq
